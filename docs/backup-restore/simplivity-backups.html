<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HPE SimpliVity backups | Express containers</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/Docker-SimpliVity/assets/css/styles.3c0ba63a.css" as="style"><link rel="preload" href="/Docker-SimpliVity/assets/js/app.3c0ba63a.js" as="script"><link rel="preload" href="/Docker-SimpliVity/assets/js/1.722b97d2.js" as="script"><link rel="prefetch" href="/Docker-SimpliVity/assets/css/14.styles.b652f3f2.css"><link rel="prefetch" href="/Docker-SimpliVity/assets/css/4.styles.0a06873b.css"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/10.f9a60754.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/11.5772beb5.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/12.51662ee7.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/13.8c0ab337.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/14.b652f3f2.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/15.3772c0ce.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/16.c9cbb442.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/17.c1e3f26d.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/18.853846a7.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/19.a0c45c3b.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/2.ae6b2fac.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/20.f2972c13.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/21.b92d359b.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/22.250164f7.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/23.15f1647e.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/24.6a337eb4.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/25.dedee5b5.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/26.5e899dd9.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/27.516a7493.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/28.6ef853ad.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/29.a0af4e1a.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/3.3255bec1.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/30.361d3e53.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/31.b915b38a.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/32.74bcea14.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/33.9cda9b85.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/34.95cb8b64.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/35.ddbb44ea.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/36.834574ab.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/37.f6124659.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/38.995c175b.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/39.cd2415b1.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/4.0a06873b.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/40.9399c7d4.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/41.0a6ac1ae.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/42.a690f124.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/43.e734f8e7.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/44.6adbd8d6.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/45.03a89f04.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/46.d7b6935d.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/47.aac02785.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/48.27ad6b31.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/49.188e86e6.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/5.8eb0733b.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/50.8267caf9.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/51.6bc02fa7.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/52.25a634eb.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/53.7d89072e.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/54.1cebdccd.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/55.48033d6c.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/56.d6681c1a.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/57.fc99b6a6.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/58.10a3f6fe.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/59.626e74dd.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/6.f6d31130.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/60.13b5d12f.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/61.c542a75e.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/62.2ff3beef.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/63.36cdbedf.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/64.798ec20a.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/65.dbc37fab.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/66.f6724cbf.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/67.7c9959bb.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/68.78bac23e.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/69.10c9d4f1.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/7.a91fd6dc.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/70.6a59e1b1.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/71.f0712c79.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/72.879bb54b.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/73.77d55da5.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/74.ac5ee2ce.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/75.a6fef310.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/76.6a89b062.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/77.cbe30dd1.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/78.26226d5f.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/79.2fe45a66.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/8.aa16fdda.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/80.d8654a44.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/81.5bde6101.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/82.d2d7f275.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/83.a2ae19d3.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/84.cef2d983.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/85.908dbf3f.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/86.f76eb3b7.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/87.abed72f7.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/88.23cd38a1.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/89.0e78e2b0.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/9.5158fa3f.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/90.472c9e46.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/91.3719924a.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/92.9408b24c.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/93.29fbd1bb.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/94.79851014.js"><link rel="prefetch" href="/Docker-SimpliVity/assets/js/95.432bb1e6.js">
    <link rel="stylesheet" href="/Docker-SimpliVity/assets/css/14.styles.b652f3f2.css"><link rel="stylesheet" href="/Docker-SimpliVity/assets/css/4.styles.0a06873b.css"><link rel="stylesheet" href="/Docker-SimpliVity/assets/css/styles.3c0ba63a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Docker-SimpliVity/" class="home-link router-link-active"><!----> <span class="site-name">Express containers</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Docker-SimpliVity/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Docker-SimpliVity/blog/" class="nav-link">Blog</a></div> <a href="https://github.com/HewlettPackard/Docker-Simplivity" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Docker-SimpliVity/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Docker-SimpliVity/blog/" class="nav-link">Blog</a></div> <a href="https://github.com/HewlettPackard/Docker-Simplivity" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Introduction</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Release notes</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution overview</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution components</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Preparing the environment</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Configuring the core components</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Overview of the playbooks</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying the core components</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Windows workers</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Sysdig monitoring</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Splunk</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Prometheus and Grafana on Docker RHEL nodes</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Post deployment</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Backup and restore</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/Docker-SimpliVity/backup-restore/backup-restore.html" class="sidebar-link">Introduction to backup and restore</a></li><li><a href="/Docker-SimpliVity/backup-restore/backup-ucp-dtr.html" class="sidebar-link">Backup UCP and DTR</a></li><li><a href="/Docker-SimpliVity/backup-restore/restore-ucp-dtr.html" class="sidebar-link">Restoring your cluster after a disaster</a></li><li><a href="/Docker-SimpliVity/backup-restore/simplivity-backups.html" class="active sidebar-link">HPE SimpliVity backups</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Docker-SimpliVity/backup-restore/simplivity-backups.html#backup-and-restore-docker-persistent-volumes-with-hpe-simplivity" class="sidebar-link">Backup and restore Docker persistent volumes with HPE SimpliVity</a></li><li class="sidebar-sub-header"><a href="/Docker-SimpliVity/backup-restore/simplivity-backups.html#create-a-docker-volume" class="sidebar-link">Create a Docker volume</a></li><li class="sidebar-sub-header"><a href="/Docker-SimpliVity/backup-restore/simplivity-backups.html#automated-backup" class="sidebar-link">Automated backup</a></li><li class="sidebar-sub-header"><a href="/Docker-SimpliVity/backup-restore/simplivity-backups.html#manual-backup" class="sidebar-link">Manual backup</a></li><li class="sidebar-sub-header"><a href="/Docker-SimpliVity/backup-restore/simplivity-backups.html#restore" class="sidebar-link">Restore</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution lifecycle management</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Appendices</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="hpe-simplivity-backups"><a href="#hpe-simplivity-backups" aria-hidden="true" class="header-anchor">#</a> HPE SimpliVity backups</h1> <h2 id="backup-and-restore-docker-persistent-volumes-with-hpe-simplivity"><a href="#backup-and-restore-docker-persistent-volumes-with-hpe-simplivity" aria-hidden="true" class="header-anchor">#</a> Backup and restore Docker persistent volumes with HPE SimpliVity</h2> <p>In order to restore a Docker volume, you need to restore a special VM that has been deployed for the sole purpose of backing up Docker volumes. There is one such VM for each datastore defined in the datastores array in the <code>group_vars/vars</code> file. By default, a single datastore is specified in the playbooks:</p> <div class="language- extra-class"><pre class="language-text"><code>datastores: ['Docker_HPE']
</code></pre></div><p><strong>Note:</strong> The use of a single datastore is recommended. If you have configured multiple datastores, you need to understand and keep track of how your Docker volumes are distributed across the datastores.</p> <p>The name of the special VM follows the pattern &lt;prefix&gt;-in-dockervols-&lt;Datastore&gt; where:</p> <ul><li>&lt;prefix&gt; is the value of the variable <code>dummy_vm_prefix</code> from the file <code>group_vars/vars</code></li> <li>&lt;Datastore&gt; is the name of the datastore</li></ul> <p>For example, based on the default values in the scripts, the VM name would be <code>hpe-VM-in-dockervols-Docker_HPE</code></p> <h2 id="create-a-docker-volume"><a href="#create-a-docker-volume" aria-hidden="true" class="header-anchor">#</a> Create a Docker volume</h2> <p>To see any existing Docker volumes created using the vSphere driver, use the <code>docker volume ls</code> command and limit the results to those volumes created using the vSphere driver. If you have already used the playbooks to install Prometheus for example, you may see a listing as follows:</p> <div class="language- extra-class"><pre class="language-text"><code>
# docker volume ls | grep vsphere
vsphere:latest      prom_hpe-db-data@Docker_HPE

</code></pre></div><p>To create a Docker volume named <code>test_01</code>, you can use the <code>docker volume create</code> command specifying the vSphere driver:</p> <div class="language- extra-class"><pre class="language-text"><code>
# docker volume create -d vsphere test_01
test_01

</code></pre></div><p>You can check that the volume exists using the <code>docker volume ls</code> command:</p> <div class="language- extra-class"><pre class="language-text"><code>
# docker volume ls | grep vsphere
vsphere:latest      prom_hpe-db-data@Docker_HPE
vsphere:latest      test_01@Docker_HPE

</code></pre></div><p>You can attach a container to the volume and then add data to it by creating a text file with some arbitrary content:</p> <div class="language- extra-class"><pre class="language-text"><code>
# docker run -it --rm -v test_01:/tmp alpine sh -c &quot;echo some test data here &gt; /tmp/foo.txt&quot;

</code></pre></div><p>If this is the first time you have used the <code>alpine</code> image, you may see additional output relating to download of image layers:</p> <div class="language- extra-class"><pre class="language-text"><code>
Unable to find image 'alpine:latest' locally
latest: Pulling from library/alpine
88286f41530e: Already exists
Digest: sha256:f006ecbb824d87947d0b51ab8488634bf69fe4094959d935c0c103f4820a417d
Status: Downloaded newer image for alpine:latest

</code></pre></div><p>The container will exit once the shell command has run and any unnamed volumes will be removed. However, the named volume <code>test_01:/tmp</code> will persist. To check that the data is still available after the container exited, spin up a new container and try to retrieve the data:</p> <div class="language- extra-class"><pre class="language-text"><code>
# docker run -it --rm -v test_01:/tmp alpine sh -c &quot;cat /tmp/foo.txt&quot;	
**some test data here**

</code></pre></div><h2 id="automated-backup"><a href="#automated-backup" aria-hidden="true" class="header-anchor">#</a> Automated backup</h2> <p>By default, the special VM and any Docker volume in the <code>dockvols</code> folder are backed up every hour. This is controlled by the following settings in the <code>group_vars/vars</code> file.</p> <div class="language- extra-class"><pre class="language-text"><code>
backup_policies:
 - name: 'hpe-gold'
   days: 'All'
   start_time: '00:00'
   frequency: '60'
   retention: '43200'

dummy_vm_prefix: 'hpe-VM'

docker_volumes_policy: 'hpe-gold'

</code></pre></div><p>The backup policy <code>hpe-gold</code> is assigned to the special VM that is used to back up the Docker volumes. This policy specifies that a backup is taken every hour (<code>frequency: '60'</code> means sixty minutes) while the backup is retained for one month (<code>retention: '43200'</code> means 43200 minutes or thirty days).</p> <h2 id="manual-backup"><a href="#manual-backup" aria-hidden="true" class="header-anchor">#</a> Manual backup</h2> <p>Rather than waiting for an automated backup to take place, you can create a backup immediately. Right-click on the special VM, in this case <code>hpe-VM-in-dockervols-Docker_HPE</code>, select <code>All HPE SimpliVity Actions</code> and choose <code>Backup Virtual Machine</code> as shown in <a href="#backup-virtual-machine">#backup-virtual-machine</a>.</p> <p><img src="/Docker-SimpliVity/assets/img/backup-virtual-machine.d51b96e0.png" alt=" "Backup virtual machine"" title="Figure 22. Backup virtual machine"></p> <p><strong>Figure 22.</strong> Backup virtual machine</p> <p>You can specify a backup name, in this case <code>manual_backup_test_01</code>, as shown in <a href="#backup-vm-details">#backup-vm-details</a>.</p> <p><img src="/Docker-SimpliVity/assets/img/backup-vm-details.59a68073.png" alt=" "Backup virtual machine details"" title="Figure 23. Backup virtual machine details"></p> <p><strong>Figure 23.</strong> Backup virtual machine details</p> <h2 id="restore"><a href="#restore" aria-hidden="true" class="header-anchor">#</a> Restore</h2> <p>Right-click on the special VM, in this case hpe-VM-in-dockervols-Docker_HPE. On the <code>Configure</code> tab, select <code>HPE SimpliVity Search Backups</code> as shown in <a href="#search-backups">#search-backups</a>.</p> <p><img src="/Docker-SimpliVity/assets/img/search-backups.bf40882a.png" alt=" "Search backups"" title="Figure 24. Search backups"></p> <p><strong>Figure 24.</strong> Search backups</p> <p>You can narrow the search based on the time of the backup. If you are restoring from an automatic backup, the name will be the timestamp of the backup. If you are restoring from a manual backup, the name will be the one you specified earlier when creating the backup, in this case <code>manual_backup_test_01</code>.</p> <p>Right-click on the backup you wish to restore, as shown in <a href="#restore-vm">#restore-vm</a>, and select <code>Restore Virtual Machine</code>.</p> <p><img src="/Docker-SimpliVity/assets/img/restore-vm.a853d9e8.png" alt=" "Restore virtual machine"" title="Figure 25. Restore virtual machine"></p> <p><strong>Figure 25.</strong> Restore virtual machine</p> <p>In the details screen, shown in <a href="#restore-vm-details">#restore-vm-details</a>, you can choose a name for the new virtual machine and specify the datastore.</p> <p><img src="/Docker-SimpliVity/assets/img/restore-vm-details.37f6aeef.png" alt=" "Restore virtual machine details"" title="Figure 26. Restore virtual machine details"></p> <p><strong>Figure 26.</strong> Restore virtual machine details</p> <p>The name of the new virtual machine will default to a combination of the special VM name and a timestamp, in this instance <code>hpe-VM-in-dockervols-Docker_HPE-2018-11-26-20h47m01s</code>. The datastore should be the one specified in the datastores array from the <code>group_vars/vars</code> file. Click OK to restore the virtual machine.</p> <p>Once the virtual machine has been restored, navigate to the datastore and locate the new VM in the file browser, as shown in <a href="#browse-restored-vm">#browse-restored-vm</a>.</p> <p><img src="/Docker-SimpliVity/assets/img/browse-restored-vm.1d0eee08.png" alt=" "Browse for restored virtual machine"" title="Figure 27. Browse for restored virtual machine"></p> <p><strong>Figure 27.</strong> Browse for restored virtual machine</p> <p>Navigate to the folder named <code>1111111-1111-1111-1111-...</code> as shown in <a href="#vmdk-files">#vmdk-files</a>. You will see files with names based on the Docker volume name that you used at the start, in this instance <code>test_01.vmdk</code> and <code>test_01-478...f1f.vmfd</code></p> <p><img src="/Docker-SimpliVity/assets/img/vmdk-files.d1fceacf.png" alt=" "Locate vmdk and vmfd files"" title="Figure 28. Locate vmdk and vmfd files"></p> <p><strong>Figure 28.</strong> Locate vmdk and vmfd files</p> <p>You need to move these two files to the <code>dockvols</code> sub-directory named <code>1111111-1111-1111-1111-...</code> in the same datastore. Right click on the <code>.vmdk</code> file and choose <code>Move to...</code> as shown in <a href="#move-to">#move-to</a>.</p> <p><img src="/Docker-SimpliVity/assets/img/move-to.fb63a90f.png" alt=" "Move files"" title="Figure 29. Move files"></p> <p><strong>Figure 29.</strong> Move files</p> <p>Set the destination folder to the <code>dockvols</code> sub-directory named <code>1111111-1111-1111-1111-...</code> as shown in <a href="#destination">#destination</a>.</p> <p><img src="/Docker-SimpliVity/assets/img/destination.56248a70.png" alt=" "Move to destination"" title="Figure 30. Move to destination"></p> <p><strong>Figure 30.</strong> Move to destination</p> <p>It is only necessary to move the <code>.vmdk</code> file as the <code>.vmfd</code> file will automatically follow. The <code>dockvols</code> sub-directory named <code>1111111-1111-1111-1111-...</code> should now contain both files as shown in <a href="#moved">#moved</a>.</p> <p><img src="/Docker-SimpliVity/assets/img/moved.f9625e3f.png" alt=" "Files moved to destination"" title="Figure 31. Files moved to destination"></p> <p><strong>Figure 31.</strong> Files moved to destination</p> <h3 id="test-the-restore"><a href="#test-the-restore" aria-hidden="true" class="header-anchor">#</a> Test the restore</h3> <p>You can check that the volume <code>test_01</code> has been restored by using the <code>docker volume ls</code> command again.</p> <div class="language- extra-class"><pre class="language-text"><code>
# docker volume ls | grep vsphere
vsphere:latest      prom_hpe-db-data@Docker_HPE
vsphere:latest      **test\_01@Docker\_HPE**

</code></pre></div><p>You can verify that the volume contains the correct data by spinning up a container and running a shell command:</p> <div class="language- extra-class"><pre class="language-text"><code>
# docker run -it --rm -v test_01:/tmp alpine sh -c &quot;cat /tmp/foo.txt&quot;
**some test data here**

</code></pre></div><p>The data you entered in the text file before performing the backup and deleting the volume is available once again after restoring the volume.</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/gabrielmcg/vp-netlify-test/edit/master/backup-restore/simplivity-backups.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Docker-SimpliVity/backup-restore/restore-ucp-dtr.html" class="prev">
          Restoring your cluster after a disaster
        </a></span> <span class="next"><a href="/Docker-SimpliVity/lifecycle/lifecycle.html">
          Introduction to solution lifecycle management
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/Docker-SimpliVity/assets/js/1.722b97d2.js" defer></script><script src="/Docker-SimpliVity/assets/js/app.3c0ba63a.js" defer></script>
  </body>
</html>
